# 高速なgetimagesizeを自作する

## 実装背景
getimagesizeで画像サイズを取得する関数を大量に実行した際に非常に時間がかかった  
オーバーヘッドは画像のダウンロード完了待ちなのでは無いかという仮説を立て実装した

## 実装内容
ヘッダー部分のみダウンロードし、画像サイズが判別できる段階で判別するような実装を行う

### 補足
gif/pngは最初に余計な要素が存在しないが、jpgに限っては様々なテキストデータが入る可能性があるため、一律5kbダウンロードするようにした  

## 結果
結果としては小さいサイズの画像に関しては大きな差は出なかった
1MBを超えるような画像であれば、明らかな差が出るようになったため仮説は正しかったのでは無いかと考えられる
また、取得サイズが1KBだろうが10KBだろうと差は出なかった
この程度であれば今現在の高速回線では差が出ないようなので、大量の情報が含まれる可能性を加味して10KB程度の取得で良さそうである